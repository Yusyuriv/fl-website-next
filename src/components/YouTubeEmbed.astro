---
interface Props {
  video: string;
  fullWidth?: boolean;
}

const { video, fullWidth } = Astro.props;

let id = video;
if (video.startsWith("http:") || video.startsWith("https:")) {
  const url = new URL(video);
  id = url.searchParams.get("v") || "";
} else if (video.includes("youtu.be")) {
  const url = new URL(video);
  id = url.pathname.slice(1);
}

const src = `https://www.youtube.com/embed/${id}`;
---
<iframe
  {src}
  class:list={{fullWidth}}
  frameborder="0"
  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
  referrerpolicy="strict-origin-when-cross-origin"
  allowfullscreen
></iframe>

<style>
.fullWidth {
    width: 100%;
    aspect-ratio: 16 / 9;
}
</style>
